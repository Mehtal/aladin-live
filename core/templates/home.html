{% extends 'base.html' %}
{% load static %}


{% block content %}
<div class="container-fluid d-flex w-100 h-100 text-center main-wrapper text-white" style="background-image:url({% static 'img/bg1.jpg' %}) ">
<div class="fixed-top">		{% if messages %}
    {% for message in messages %}
    {% if message.tags == "error" %}
    <div class="alert alert-danger" role="alert">
  <strong>{{ message }}</strong> 
</div>
    {% else %}
    <div class="alert alert-primary" role="alert">
  <strong>{{ message }}</strong> 
</div>
    {% endif %}
    {% endfor %}
{% endif %}</div>
<div class="cover-container w-100 h-100 p-3 grid-center">

  <main class="px-3 ">
    <h1 class ="d-none"id="text1"></h1>
    <h1 class="animate-charcter mb-5" id="text2"></h1>
    <p class="text-secondary">à cause de covid l'école a décidé d'ouvrir une plateforme en ligne pour nos élèves qui ne peuvent pas y assister afin qu'ils ne manquent pas leurs cours</p>
    <form method="post">{% csrf_token %} <div class="input-group my-2">
      <input name="code" required id="id_code" type="text" class="form-control" placeholder="insérer Code d'eleve ici" aria-label="" >
      <div class="input-group-append">
       <button class="btn btn-primary" type="submit">joindre</button>
      </div>
    </div></form>
  </main>


</div>

</div>
{% endblock content %}


{% block js %}
 <script type="text/javascript">
  	const elts = {
  	    text1: document.getElementById("text1"),
  	    text2: document.getElementById("text2")
  	};

  	const texts = [
  	    "Bienvenu",
  	    "sur",
  	    "ecole aladin",
  	    "live",
  	];

  	const morphTime = 1;
  	const cooldownTime = 0.25;

  	let textIndex = texts.length - 1;
  	let time = new Date();
  	let morph = 0;
  	let cooldown = cooldownTime;

  	elts.text1.textContent = texts[textIndex % texts.length];
  	elts.text2.textContent = texts[(textIndex + 1) % texts.length];

  	function doMorph() {
  	    morph -= cooldown;
  	    cooldown = 0;

  	    let fraction = morph / morphTime;

  	    if (fraction > 1) {
  	        cooldown = cooldownTime;
  	        fraction = 1;
  	    }

  	    setMorph(fraction);
  	}

  	function setMorph(fraction) {
  	    elts.text2.style.filter = `blur(${Math.min(8 / fraction - 8, 100)}px)`;
  	    elts.text2.style.opacity = `${Math.pow(fraction, 0.4) * 100}%`;

  	    fraction = 1 - fraction;
  	    elts.text1.style.filter = `blur(${Math.min(8 / fraction - 8, 100)}px)`;
  	    elts.text1.style.opacity = `${Math.pow(fraction, 0.4) * 100}%`;

  	    elts.text1.textContent = texts[textIndex % texts.length];
  	    elts.text2.textContent = texts[(textIndex + 1) % texts.length];
  	}

  	function doCooldown() {
  	    morph = 0;

  	    elts.text2.style.filter = "";
  	    elts.text2.style.opacity = "100%";

  	    elts.text1.style.filter = "";
  	    elts.text1.style.opacity = "0%";
  	}

  	function animate() {
  	    requestAnimationFrame(animate);

  	    let newTime = new Date();
  	    let shouldIncrementIndex = cooldown > 0;
  	    let dt = (newTime - time) / 1000;
  	    time = newTime;

  	    cooldown -= dt;

  	    if (cooldown <= 0) {
  	        if (shouldIncrementIndex) {
  	            textIndex++;
  	        }

  	        doMorph();
  	    } else {
  	        doCooldown();
  	    }
  	}

  	animate();

  </script>
{% endblock js%}